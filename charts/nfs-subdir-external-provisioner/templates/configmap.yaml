{{ if (include "nfs.existing-configmap-provided" .) }}
{{- $existingConfigMap := (lookup "v1" "ConfigMap" .Values.nfs.existingConfigMap.namespace .Values.nfs.existingConfigMap.name).data | default dict }}
{{- if not $existingConfigMap }}
apiVersion: v1
data:
  path: {{ .Values.nfs.path }}
  server: {{  .Values.nfs.server}}
immutable: false
kind: ConfigMap
metadata:
  name: {{ template "nfs.existing-configmap" . }}
{{- end }}
{{- end }}